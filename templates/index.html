<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Khokhotiva - Loja Online</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
        }

        /* === CABE√áALHO ATUALIZADO === */
        .header {
            background: linear-gradient(135deg, #2e7d32, #4caf50);
            color: white;
            padding: 20px 40px; /* Aumentei o padding lateral */
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            
            /* Novas regras para alinhar */
            display: flex;
            justify-content: space-between; /* Joga um item para a esquerda e outro para a direita */
            align-items: center; /* Alinha verticalmente */
            flex-wrap: wrap; /* Permite quebrar a linha em telas menores */
            gap: 20px; /* Espa√ßo entre os itens se quebrar */
        }

        .header-left-content {
            flex: 1; /* Ocupa o espa√ßo dispon√≠vel */
            min-width: 300px; /* Largura m√≠nima */
        }
        
        .header-right-admin {
            /* O bot√£o admin agora fica aqui */
        }

        .logo {
            font-size: 2.0em; /* Diminu√≠ um pouco para o texto novo */
            font-weight: bold;
            margin-bottom: 10px;
        }

        .slogan {
            font-size: 1.1em; /* Ajustei o tamanho */
            margin-bottom: 15px;
            opacity: 0.9;
        }

        /* Estilo para a nova linha de contato */
        .header-contact {
            display: flex;
            flex-wrap: wrap;
            gap: 20px; /* Espa√ßo entre os √≠cones de contato */
            font-size: 0.9em;
            opacity: 0.9;
        }
        
        .header-contact span {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* === FIM DAS MUDAN√áAS NO CABE√áALHO === */


        /* CATEGORIAS */
        .categories {
            background: white;
            padding: 15px;
            text-align: center;
            border-bottom: 2px solid #4caf50;
        }

        .category-btn {
            background: #4caf50;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 20px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .category-btn:hover {
            background: #2e7d32;
        }

        /* PRODUTOS */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            padding: 30px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .product-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s;
            border: 2px solid #e8f5e8;
        }

        .product-card:hover {
            transform: translateY(-5px);
            border-color: #4caf50;
        }

        .product-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 15px;
            background: #f8f8f8;
        }

        .product-name {
            font-size: 1.2em;
            font-weight: bold;
            color: #2e7d32;
            margin-bottom: 8px;
        }

        .product-category {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 8px;
        }

        .product-price {
            font-size: 1.3em;
            font-weight: bold;
            color: #e65100;
            margin-bottom: 15px;
        }

        .add-to-cart {
            background: #ff9800;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            transition: background 0.3s;
            width: 100%;
        }

        .add-to-cart:hover {
            background: #f57c00;
        }

        /* === ESTILO ATUALIZADO DO BOT√ÉO ADMIN === */
        .admin-btn {
            background: rgba(255, 255, 255, 0.2); /* Fundo branco semi-transparente */
            color: white;
            padding: 12px 25px;
            text-decoration: none;
            border-radius: 25px;
            transition: background 0.3s;
            border: 1px solid white; /* Borda branca */
            font-weight: bold;
        }

        .admin-btn:hover {
            background: rgba(255, 255, 255, 0.4); /* Mais opaco no hover */
        }
        /* === FIM DA MUDAN√áA === */


        /* CARRINHO FIXO */
        .cart-floating {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #ff9800;
            color: white;
            padding: 15px 20px;
            border-radius: 50px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            cursor: pointer;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .cart-icon {
            font-size: 1.5em;
        }

        /* RODAP√â */
        .footer {
            background-color: #1976d2; /* Fundo azul */
            color: #ffffff; 
            padding: 40px 20px;
            margin-top: 30px; 
        }

        .footer-container {
            display: flex;
            justify-content: space-between; 
            flex-wrap: wrap; 
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
            padding-bottom: 20px;
            border-bottom: 1px solid #42a5f5; 
        }

        .footer-column {
            flex: 1; 
            min-width: 250px; 
        }

        .footer-column h4 {
            font-size: 1.2em;
            font-weight: bold;
            color: #ffffff;
            margin-bottom: 15px;
            border-bottom: 2px solid #ffffff; 
            padding-bottom: 5px;
            display: inline-block;
        }

        .footer-column p {
            line-height: 1.6;
            color: #e3f2fd; 
        }

        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            font-size: 0.9em;
            color: #bbdefb; 
        }
    </style>
</head>
<body>
    
    <header class="header">
        <div class="header-left-content">
            <div class="logo">Bem vindo √† Khokhotiva</div>
            <div class="slogan">Sua loja online de alimentos frescos e de qualidade</div>
            <div class="header-contact">
                <span>üìç Gaza, Ch√≥kw√®, ISPG</span>
                <span>üìû +258 861222095</span>
                <span>‚úâÔ∏è contato@khokhotiva.com</span>
            </div>
        </div>
        
        <div class="header-right-admin">
            <a href="/login" class="admin-btn">√Årea de Administra√ß√£o</a>
        </div>
    </header>
    <section class="categories">
        <button class="category-btn">Todos os Produtos</button>
        <button class="category-btn">Frutas</button>
        <button class="category-btn">Legumes</button>
        <button class="category-btn">Gr√£os</button>
        <button class="category-btn">Bebidas</button>
        <button class="category-btn">Outros</button>
    </section>

    <section class="products-grid">
        {% for product in products %}
        <div class="product-card">
            {% if product[5] %}
                <img src="{{ product[5] }}" alt="{{ product[1] }}" class="product-image">
            {% else %}
                <img src="https://via.placeholder.com/250x200/4caf50/white?text=Sem+Imagem" alt="Sem imagem" class="product-image">
            {% endif %}
            <div class="product-name">{{ product[1] }}</div>
            <div class="product-category">{{ product[2] }}</div>
            <div class="product-price">{{ product[3] }} MZN</div>
            <button class="add-to-cart" onclick="addToCart({{ product[0] }}, '{{ product[1] }}', {{ product[3] }})">
                üõí Adicionar ao Carrinho
            </button>
        </div>
        {% endfor %}
    </section>

    <div class="cart-floating" onclick="viewCart()">
        <span class="cart-icon">üõí</span>
        <span id="cart-count">0</span> itens
    </div>

    <footer class="footer">
        <div class="footer-container">
            <div class="footer-column">
                <h4>Sobre Khokhotiva</h4>
                <p>Produtos Produzidos localmente.</p>
            </div>
            <div class="footer-column">
                <h4>Localiza√ß√£o</h4>
                <p>Mozambique, Gaza, Chokwe, ISPG, FARMA</p>
            </div>
            <div class="footer-column">
                <h4>Contato</h4>
                <p>Email: contato@khokhotiva.com</p>
                <p>Telefone: +258 861222095</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>¬© 2025 Khokhotiva. Todos os direitos reservados.</p>
        </div>
    </footer>


    <script>
        let cart = JSON.parse(localStorage.getItem('khokhotiva_cart')) || [];

        function addToCart(productId, productName, price) {
            // Verificar se o produto j√° est√° no carrinho
            const existingItem = cart.find(item => item.id === productId);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    id: productId,
                    name: productName,
                    price: price,
                    quantity: 1
                });
            }
            
            saveCart();
            updateCartCount();
            alert(`${productName} adicionado ao carrinho!`);
        }

        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            saveCart();
            updateCartCount();
            // Atualizar o modal se estiver aberto
            const modal = document.getElementById('cart-modal');
            if (modal) {
                document.body.removeChild(modal);
                viewCart(); // Reabrir o modal atualizado
            } else {
                alert('Produto removido do carrinho!');
            }
        }

        function updateQuantity(productId, change) {
            const item = cart.find(item => item.id === productId);
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) {
                    removeFromCart(productId);
                } else {
                    saveCart();
                    updateCartCount();
                    // Atualizar o modal se estiver aberto
                    const modal = document.getElementById('cart-modal');
                    if (modal) {
                        document.body.removeChild(modal);
                        viewCart(); // Reabrir o modal atualizado
                    }
                }
            }
        }

        function saveCart() {
            localStorage.setItem('khokhotiva_cart', JSON.stringify(cart));
        }

        function updateCartCount() {
            const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
            document.getElementById('cart-count').textContent = totalItems;
        }

        function viewCart() {
            // Remover qualquer modal antigo
            const oldModal = document.getElementById('cart-modal');
            if (oldModal) {
                document.body.removeChild(oldModal);
            }

            if (cart.length === 0) {
                alert('Carrinho vazio!');
                return;
            }

            // Criar modal do carrinho
            const modal = document.createElement('div');
            modal.id = 'cart-modal'; // ID para f√°cil remo√ß√£o
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.5);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 2000;
            `;

            let total = 0;
            let cartContent = `
                <div style="background: white; padding: 30px; border-radius: 15px; max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto; box-shadow: 0 5px 20px rgba(0,0,0,0.3);">
                    <h2 style="color: #2e7d32; margin-bottom: 20px; text-align: center;">üõí Meu Carrinho</h2>
                    <div style="max-height: 300px; overflow-y: auto; margin-bottom: 20px; border: 1px solid #eee; border-radius: 8px;">
            `;

            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                
                cartContent += `
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px; border-bottom: 1px solid #eee;">
                        <div style="flex: 1;">
                            <strong>${item.name}</strong><br>
                            <small>${item.price} MZN √ó ${item.quantity}</small>
                        </div>
                        <div style="font-weight: bold; color: #e65100; margin: 0 10px;">${itemTotal} MZN</div>
                        <div style="display: flex; gap: 5px; align-items: center;">
                            <button onclick="updateQuantity(${item.id}, -1)" style="background: #ffcdd2; color: #c62828; border: none; width: 25px; height: 25px; border-radius: 50%; cursor: pointer; font-weight: bold;">-</button>
                            <span>${item.quantity}</span>
                            <button onclick="updateQuantity(${item.id}, 1)" style="background: #c8e6c9; color: #2e7d32; border: none; width: 25px; height: 25px; border-radius: 50%; cursor: pointer; font-weight: bold;">+</button>
                            <button onclick="removeFromCart(${item.id})" style="background: #ffecb3; color: #f57c00; border: none; width: 25px; height: 25px; border-radius: 50%; cursor: pointer; margin-left: 5px;">üóëÔ∏è</button>
                        </div>
                    </div>
                `;
            });

            cartContent += `
                    </div>
                    <div style="border-top: 2px solid #4caf50; padding-top: 15px;">
                        <div style="display: flex; justify-content: space-between; font-size: 1.2em; font-weight: bold; margin-bottom: 20px;">
                            <span>Total:</span>
                            <span style="color: #e65100;">${total} MZN</span>
                        </div>
                        <div style="display: flex; flex-direction: column; gap: 10px; justify-content: center;">
                            <button onclick="sendWhatsApp()" style="background: #25D366; color: white; border: none; padding: 12px 20px; border-radius: 25px; cursor: pointer; font-size: 1em;">üìû Enviar Pedido por WhatsApp</button>
                            <button onclick="clearCart()" style="background: #ef5350; color: white; border: none; padding: 10px 20px; border-radius: 25px; cursor: pointer;">Esvaziar Carrinho</button>
                            <button onclick="document.body.removeChild(document.getElementById('cart-modal'))" style="background: #757575; color: white; border: none; padding: 10px 20px; border-radius: 25px; cursor: pointer; margin-top: 5px;">Fechar</button>
                        </div>
                    </div>
                </div>
            `;

            modal.innerHTML = cartContent;
            document.body.appendChild(modal);

            // Fechar modal ao clicar fora
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            });
        }

        function clearCart() {
            if (confirm('Tem certeza que quer esvaziar o carrinho?')) {
                cart = [];
                saveCart();
                updateCartCount();
                const modal = document.getElementById('cart-modal');
                if (modal) {
                    document.body.removeChild(modal);
                }
                alert('Carrinho esvaziado!');
            }
        }

        function sendWhatsApp() {
            if (cart.length === 0) {
                alert('Carrinho vazio!');
                return;
            }

            let message = "üõí *PEDIDO KHOKHOTIVA* üõí\n\n";
            let total = 0;

            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                message += `‚Ä¢ ${item.name} (${item.quantity}x) - ${itemTotal} MZN\n`;
            });

            message += `\nüí∞ *TOTAL: ${total} MZN*\n\n`;
            message += "üìç *Entrega:* Gaza, Ch√≥kw√®, ISPG\n";
            message += "üìû *Contacto:* +258 861222095\n\n";
            message += "_Enviarei o comprovante de pagamento por WhatsApp_";

            const whatsappUrl = `https://wa.me/258861222095?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }

        // Inicializar contador do carrinho
        updateCartCount();
    </script>
    
</body>
</html>